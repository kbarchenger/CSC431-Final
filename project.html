<html>
<head>
<script type="text/javascript" src="project.js"></script>
<script type="text/javascript">

// Test of Linear Algebra functions
test1 = function() {
    try{
        var M = new Matrix(2,3,-1);
        var N = new Matrix(2,3,[1,2,3,4,5,6]);
        var O = new Matrix(3,2,[1,2,3,4,5,6]);

        print_matrix(M);
        print_matrix(N);
        print_matrix(O);

        var P = M.add(N);
        print_matrix(P);

        var Q = M.sub(N);
        print_matrix(Q);

        var R = identity_matrix(3);
        var S = diagonal_matrix([1,2,3,4]);
        var T = matrix_from_list([[1,2,3],[4,5,6],[7,8,9]]);
        var U = T.neg();

        print_matrix(R);
        print_matrix(S);
        print_matrix(T);
        print_matrix(U);

        var V = M.mult(2);
        print_matrix(M);
        print_matrix(V);

        var W = N.mult(O);
        print_matrix(W);

        var X = T.swap_rows(0,1);
        print_matrix(T);
        print_matrix(X);

        var Y = N.transpose();
        print_matrix(N);
        print_matrix(Y);

        var F = new Matrix(2,2,[1,2,3,4]);
        var G = F.inverse();
        print_matrix(G);

        var J = F.div(2);
        print_matrix(J);

        var K = new Matrix(2,2,[4,3,2,1]);
        var L = K.div(F);
        print_matrix(L);
        
        var AA = new Matrix(2,2,[1,0,0,1]);
        var AA_bool = AA.is_almost_symmetric();
        print_matrix(AA);
        console.log('Matrix is almost symmetric: ' + AA_bool);
        
        var AB = new Matrix(2,2,[1,2,3,4]);
        var AB_bool = AB.is_almost_symmetric();
        print_matrix(AB);
        console.log('Matrix is almost symmetric: ' + AB_bool);
        
        var AC = new Matrix(2,2,[1,0,0,1]);
        var AC_bool = AC.is_almost_zero();
        print_matrix(AC);
        console.log('Matrix is almost zero: ' + AC_bool);

        var AD = new Matrix(2,2,[1,2,3,4]);
        var AD_bool = AD.is_almost_zero();
        print_matrix(AD);
        console.log('Matrix is almost zero: ' + AD_bool);
        
        // Testing Cholesky
        var AE = new Matrix(3,3,[2,-1,0,-1,2,-1,0,-1,2]);
        var AE_Chol = Cholesky(AE);
        print_matrix(AE);
        console.log('After Cholesky:');
        print_matrix(AE_Chol);
        
        // Testing is_positive_definite
        var AE_bool = is_positive_definite(AE);
        console.log('Is positive definite? ' + AE_bool);
        var AF = new Matrix(2,2,[1,2,2,1]);
        var AF_bool = is_positive_definite(AF);
        print_matrix(AF);
        console.log('Is positive definite? ' + AF_bool);
        
        // Testing Markovitz
        var AG = matrix_from_list([[0.04, 0.006,0.02],
                                   [0.006,0.09, 0.06],
                                   [0.02, 0.06, 0.16]]);
        var mu = matrix_from_list([[0.10],[0.12],[0.15]]);
        var r_free = 0.05;
        var AG_port, AG_risk, AG_return;
        AG_results = Markovitz(mu, AG, r_free);
        AG_port = AG_results[0];
        AG_return = AG_results[1];
        AG_risk = AG_results[2];
        console.log('AG:');
        print_matrix(AG);
        console.log('AG portfolio:');
        print_matrix(AG_port);
        console.log('AG risk: ' + AG_risk);
        console.log('AG return: ' + AG_return);

        // Testing Norm
        var AH = norm([1,2,3,4], 2);
        console.log('Norm of AH = ' + AH);
        var AI = norm(N,1);
        console.log('Norm of N = ' + AI);

        // Testing condition number
        var AJ = new Matrix(2, 2, [1,2,3,4]);
        var AK = condition_number(AJ);
        console.log("Condition number of AJ = " + AK);

        // Testing exp
        var AL = exp(3);
        console.log("exp(3) = " + AL);
        var AM = exp(F, 100);
        console.log("exp(F) =");
        print_matrix(AM);

    }
    catch(err) {
        alert(err);
    }
}

// Test of solvers and optimizers
test2 = function() {
    try {
        // Define function f(x)
        f = function(x){
            return Math.sin(Math.cos(Math.pow(x,2))) - x;
        }

        // Define function g(x)
        g = function(x){
            return Math.sin(Math.cos(Math.pow(x,2)));
        }

        // Testing solve_fixed_point
        console.log("Fixed Point: x = " + solve_fixed_point(f, 0.5, 100));

        // Testing solve_bisection
        console.log("Bisection method: x = " +
                    solve_bisection(f, 0.5, 1, 100));

        // Testing solve_newton
        console.log("Newton: x = " + solve_newton(f, 0.5, 100));

        // Testing solve_secant
        console.log("Secant: x = " + solve_secant((f, 0.5, 100));

        // Testing solve_newton_stabilized
        console.log("Newton Stabilized: x = " +
                    solve_newton_stabilized(f, 0.5, 1, 100));

        // Testing optimize_bisection
        console.log("Optimize Bisection: x = " +
                    optimize_bisection(f, 0, 2, 100));

        // Testing optimize_newton
        console.log("Optimize Newton: x = " +
                    optimize_newton(f, 0.5, 100));

        // Testing optimize_secant
        console.log("Optimze Secant: x = " +
                    optimize_secant(f, 1, 100));

        // Testing optimize_newton_stabilized
        console.log("Optimize Newton Stabilized: x = " +
                    optimize_newton_stabilized(f, 0.5, 1, 100));

        // Testing optimize_golden_search
        console.log("Optimize Golden Search: x = " +
                    optimize_golden_search(f, 0, 2, 100));


    }
    catch(err) {
        alert(err);
    }
}

test1();
test2();

</script>
</head>
</html>